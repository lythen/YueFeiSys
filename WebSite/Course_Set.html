<!doctype html>
<html lang="zh-CN">
<head>
    <base target="right" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="css/common.css" />
    <link rel="stylesheet" href="css/main.css"/>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" type="text/css" href="css/easyui.css" />
    <script type="text/javascript" src="Scripts/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="Scripts/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="Scripts/typecheck.js"></script>
    <title>后台首页</title>
    <style>
    #contain{width:960px;margin-left:15px;margin-righ:15px;}
    </style>
    <script>
        $(function () {
            loadTree();
            $('#txtdate').datetimebox({ required: true });
        });
        function loadTree() {
            $('#cbt').combotree({
                url: 'AjaxHandler/SubjectComboTreeHandler.ashx',
                required: true,
                method: 'get',
                valueField: 'id',
                textField: 'text',
                onChange: function (newValue, oldValue) {

                }
            });
        }
        function checkAll(obj) {
            var isCheck = obj.checked;
            var boxlist = $("#alist_table").find("input", "[type='checkbox']");
            for (var i = 0; i < boxlist.length; i++) {
                boxlist[i].checked = isCheck;
            }
        }
        function AddCourse() {
            var sub_id = $(".combo-value").val();

            if (sub_id == "" || sub_id == "0")
                alert("请选择科目");
            else {
                var course = $("#txtcourse").val();
                if (course == "") {
                    alert("请选择课程名称。");
                    return;
                }
                var datetime = $("#txtdate").datetimebox('getValue');
                if (!isDateStr(datetime)) {
                    alert("时间格式不正确。");
                    return;
                }
                if (!isValidString(course)) {
                    var teacher = $("#select_t").val();
                    $.post("AjaxHandler/CourseHandler.ashx",
                    { 'type': 'add',
                        'sub_id': sub_id,
                        'course': course,
                        'teacher': teacher
                    },
                    function (data, status) {
                        if (status == "success") {
                            if (data == "success") {
                                alert("添加成功。");
                                loadTree();
                            } else if (data == "hasname") alert("科目重复。");
                            else {
                                alert("添加失败。")
                            }
                        } else {
                            alert("添加失败。");
                        }
                    });
                } else {
                alert('课程名称包含危险字符。');
                }
            }
        }
    </script>
</head>
<body>
    <div id="contain">
    <div id="search_bar" class="mt10">
       <div class="box">
          <div class="box_border">
            <div class="box_top"><b class="pl15">添加课程</b></div>
            <div class="box_center pt10 pb10">
            <table cellpadding="0" cellspacing="0" border="0">
            <tr>
            <td>&nbsp;&nbsp;课目筛选：</td>
            <td><span>
                      <div class="select_border"> 
                        <div class="select_containers "> 
                       <input id="cbt" style="width:200px;" />
                        </div> 
                      </div> 
                    </span></td>
            <td>&nbsp;&nbsp;课程名称：</td>
            <td><input type="text" id="txtcourse" name="name" class="input-text lh30" style="width:200px;" /></td>
            <td>&nbsp;&nbsp;
            <input type="button" name="button" onclick="AddCourse();" class="btn btn82 btn_add" value="新增"/> </td>
            </tr>
            <tr>
            <td>&nbsp;&nbsp;选择老师：</td>
            <td><span>
                      <div class="select_border"> 
                        <div class="select_containers "> 
                        <select name="" id="select_t" class="select"> 
                        <option value="1">肖秤</option> 
                        <option value="2">刘德华</option> 
                        </select> 
                        </div> 
                      </div> 
                    </span></td>
            <td>&nbsp;&nbsp;上课时间：</td>
            <td><input id="txtdate" style="width:200px;" /></td>
            <td>
            </td>
            </tr>
            </table>
            </div>
          </div>
        </div>
    </div>
    <div id="table" class="mt10">
        <div class="box span10 oh">
        <div class="box_bottom pb5 pt5 pr10" style="border:1px solid #dadada;">
              <div class="search_bar_btn">
        &nbsp;&nbsp;
                    课程状态：<span>
                      <div class="select_border"> 
                        <div class="select_containers "> 
                        <select name="" class="select"> 
                        <option value="0">全部</option> 
                        <option value="1">已结束</option> 
                        <option value="2">进行中</option> 
                        <option value="3">未开始</option> 
                        </select> 
                        </div> 
                      </div> 
                    </span>
                     &nbsp;&nbsp; <input type="button" name="button" class="btn btn82 btn_del" value="删除"/>
        </div></div>
        <br />
              <table width="100%" border="0" cellpadding="0" cellspacing="0"  id="alist_table" class="list_table">
                <tr>
                   <th><input type="checkbox"  onclick="checkAll(this);" name="button" value="全选"/>全选 </th>
                   <th>课程ID</th>
                   <th>课程名称</th>
                   <th>所属科目</th>
                   <th>上课时间</th>
                   <th>任课老师</th>
                   <th>学费</th>
                   <th>状态</th>
                   <th>操作</th>
                    </tr>
                <tr class="tr">
                   <td class="td_center"><input type="checkbox"></td>
                   <td>aad</td>
                   <td>aad</td>
                   <td>aad</td>
                <td>aad</td>
                <td>aad</td>
                   <td>aad</td>
                   <td>aad</td>
                <td align="center"><a href="">详细</a></td>
                 </tr>
                 <tr class="tr"> 
                   <td class="td_center"><input type="checkbox"/></td>
                   <td>aad</td>
                   <td>aad</td>
                   <td>aad</td>
                <td>aad</td>
                <td>aad</td>
                   <td>aad</td>
                <td align="center"><a href="">详细</a></td>
                 </tr>
                 <tr class="tr">
                    <td class="td_center"><input type="checkbox"></td>
                   <td>aad</td>
                   <td>aad</td>
                   <td>aad</td>
                <td>aad</td>
                 </tr>
                 <tr class="tr">
                    <td class="td_center"><input type="checkbox"></td>
                   <td>aad</td>
                   <td>aad</td>
                   <td>aad</td>
                <td>aad</td>
                 </tr>
                 <tr class="tr">
                    <td class="td_center"><input type="checkbox"></td>
                   <td>aad</td>
                   <td>aad</td>
                   <td>aad</td>
                <td>aad</td>
                 </tr>
                 <tr class="tr">
                   <td class="td_center"><input type="checkbox"></td>
                   <td>aad</td>
                   <td>aad</td>
                   <td>aad</td>
                <td>aad</td>
                 </tr>
                 <tr class="tr">
                   <td class="td_center"><input type="checkbox"></td>
                   <td>aad</td>
                   <td>aad</td>
                   <td>aad</td>
                <td>aad</td>
                 </tr>
                 <tr class="tr">
                   <td class="td_center"><input type="checkbox"></td>
                   <td>aad</td>
                   <td>aad</td>
                   <td>aad</td>
                <td>aad</td>
                 </tr>
                 <tr class="tr">
                   <td class="td_center"><input type="checkbox"></td>
                   <td>aad</td>
                   <td>aad</td>
                   <td>aad</td>
                <td>aad</td>
                 </tr>
              
              </table>
              <div class="page mt10">
                <div class="pagination">
                  <ul>
                      <li class="first-child"><a href="#">首页</a></li>
                      <li class="disabled"><span>上一页</span></li>
                      <li class="active"><span>1</span></li>
                      <li><a href="#">2</a></li>
                      <li><a href="#">下一页</a></li>
                      <li class="last-child"><a href="#">末页</a></li>
                  </ul>
                </div>

              </div>
        
        </div>
     </div>
     </div>
</body>
</html>
